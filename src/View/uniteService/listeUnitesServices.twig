{% extends "base.twig" %}

{% block page_content %}
    {% set nbUS = unitesServices|length %}
    {% set chunkSize = (nbUS / 2)|round(0, 'ceil') %}
    {% set chunks = unitesServices|batch(chunkSize) %}
    <div class="titreEtBarreRecherche">
        <h2>Liste des unités de services</h2> {# TODO : A changer en fonction des intervenants du départements et des vacataires #}
        <form class="barreRecherche" action="#" method="post">
            <fieldset id="unitesServices">
                <div class="conteneurChamps">
                    <label for="uniteService_id"></label>
                    <input class="champsRecherche" type="text" data-inputfun="autocompUS.requeteAJAX()"
                           placeholder="Rechercher une unité de service"
                           name="uniteService"
                           id="uniteService_id" required>
                    <div class="boutonEnvoie">
                        <img src="{{ asset("../ressources/img/search.svg") }}" alt="loupe">
                    </div>
                </div>
                <div class="autocompletion" data-inputfun="autocompUS.requeteAJAX()"
                     data-htmlvar="autocompUS.suggestions_str"></div>
            </fieldset>
        </form>
    </div>
    <div class="liste">
        {% for chunk in chunks %}
            <ul>
                {% for uniteService in chunk %}
                    <li class="boutonContainer">
                        <a href="#">{{ uniteService.getNature }}   {{ uniteService.getLibUS }}   {{ uniteService.getIdUSReferentiel }}</a>
                    </li>
                {% endfor %}
            </ul>
        {% endfor %}
    </div>
{% endblock %}